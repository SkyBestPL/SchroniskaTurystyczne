@model SchroniskaTurystyczne.ViewModels.BookingSummaryViewModel

@{
    ViewData["Title"] = "Podsumowanie rezerwacji";
}

<h2>Podsumowanie rezerwacji</h2>

<p>Gość: @Model.IdGuest</p>
<p>Data zameldowania: @Model.CheckInDate.ToShortDateString()</p>
<p>Data wymeldowania: @Model.CheckOutDate.ToShortDateString()</p>

<h3>Szczegóły pokoi</h3>
<table>
    <thead>
        <tr>
            <th>Pokój</th>
            <th>Liczba osób</th>
            <th>Cena za noc</th>
            <th>Łączna cena</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var room in Model.Rooms)
        {
            <tr>
                <td>@room.RoomName</td>
                <td>@room.NumberOfPeople</td>
                <td>@room.PricePerNight zł</td>
                <td>@(room.NumberOfPeople * room.PricePerNight * (Model.CheckOutDate - Model.CheckInDate).Days) zł</td>
            </tr>
        }
    </tbody>
</table>

<p>Całkowity koszt: @Model.TotalBill zł</p>

<form asp-action="FinalizeBooking" method="post">
    <input type="hidden" name="IdGuest" value="@Model.IdGuest" />
    <input type="hidden" name="CheckInDate" value="@Model.CheckInDate" />
    <input type="hidden" name="CheckOutDate" value="@Model.CheckOutDate" />
    <input type="hidden" name="NumberOfPeople" value="@Model.NumberOfPeople" />
    <input type="hidden" name="RoomsJson" value="@Newtonsoft.Json.JsonConvert.SerializeObject(Model.Rooms)" />
    <button type="submit">Potwierdź i zapłać</button>
</form>